import{d as H}from"./vue-router.21860d65.js";import{a as y,f as N,u as Y,b as z}from"./index.684c656d.js";import{C as W}from"./Index.518fc16a.js";import K from"./DatabaseTools.59b2d8ba.js";import{B as $}from"./Checkbox.a4e60e91.js";import"./translations.d159963e.js";import{_ as D}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as k,s as _}from"./default-i18n.20001971.js";import{y as l,o as n,d as c,G as S,N as C,H as h,w as u,a as w,t as m,e as p,c as f,b as T,u as L,r as O,J as G,j as V}from"./runtime-dom.esm-bundler.d8b05b6d.js";import{C as P,S as F}from"./Caret.2e43336b.js";import{C as j}from"./Card.bf13def3.js";import{C as q}from"./Tabs.e0ecfe82.js";import{C as J}from"./Index.f979fbbe.js";import{C as Q}from"./NetworkSiteSelector.85cf8995.js";import{C as X}from"./SettingsRow.892a6d38.js";import{G as Z,a as ee}from"./Row.755a571f.js";import{D as te}from"./datetime.f197aeae.js";import{u as I}from"./ToolsStore.c5968e94.js";import oe from"./HtaccessEditor.85df93c8.js";import se from"./ImportExport.4f68fcf7.js";import ne from"./RobotsEditor.a633d433.js";import ie from"./SystemStatus.4fc956a3.js";import ae from"./WpCode.108bb358.js";import{u as re}from"./RobotsTxt.99713e1a.js";import"./helpers.2304d5ee.js";import"./license.a1ca2d82.js";import"./upperFirst.d10eb25f.js";import"./toString.ddc58e67.js";import"./allowed.d1f2b87f.js";import"./deburr.ef08c7b4.js";/* empty css             */import"./params.af7ed354.js";import"./Header.200fe2be.js";import"./addons.20532c13.js";import"./ScrollAndHighlight.6cfc4a22.js";import"./ScrollTo.81bea8a7.js";import"./LicenseKeyBar.c60d143b.js";import"./LogoGear.ffb86d6f.js";import"./AnimatedNumber.da8dc531.js";import"./numbers.9fc174f3.js";import"./Logo.1d87eeb5.js";import"./index.62c20ef8.js";import"./Support.52306335.js";import"./date.10ef6814.js";import"./constants.ee441da2.js";import"./Url.ee93195e.js";import"./Exclamation.e58309d9.js";import"./Gear.532438a0.js";import"./Slide.53cdbff7.js";import"./Network.4cfad788.js";import"./ToolsSettings.b683d2c5.js";import"./Checkmark.39dd9d2f.js";import"./Blur.f5469924.js";import"./Index.c75b76e1.js";import"./RequiredPlans.6ae123d8.js";import"./Tooltip.f699c54b.js";import"./ProBadge.e29f5c16.js";import"./Information.5f425594.js";import"./Editor.2e93bf84.js";import"./tags.4b35a532.js";import"./isEqual.4ddce6d4.js";import"./_baseIsEqual.fbe0f200.js";import"./_getTag.f48446e8.js";import"./_baseClone.72ffba34.js";import"./_arrayEach.6af5abac.js";import"./_getAllKeysIn.4f27d7aa.js";import"./Plus.4801a669.js";import"./History.844408ad.js";import"./Refresh.a0b52b84.js";import"./Upload.a36aa329.js";import"./Radio.351f457f.js";import"./Download.333a2ef3.js";import"./regex.8a6101c0.js";import"./vuedraggable.umd.7e294ad4.js";import"./UnwantedBots.ad45f35b.js";import"./RadioToggle.55ee1e6d.js";import"./Ellipse.f3ed9bb0.js";import"./External.9019c3ac.js";import"./Row.5aad101b.js";const R="all-in-one-seo-pack",le={emits:["update"],setup(){return{rootStore:y(),addonsStore:N()}},components:{BaseCheckbox:$},props:{loading:Boolean,disabled:Boolean},data(){return{selectedAddons:{},strings:{runAction:k("Run Action",R),noAddons:k("There are no active addons at the moment.",R)}}},computed:{activeAddons(){return this.addonsStore.addons.filter(t=>t.isActive)},selectedSkus(){return Object.keys(this.selectedAddons).filter(t=>this.selectedAddons[t])}}},ce={class:"aioseo-addons-list"},de={key:1};function ue(t,o,s,r,e,i){const d=l("base-checkbox"),b=l("base-button");return n(),c("div",ce,[i.activeAddons.length>0?(n(),c(S,{key:0},[(n(!0),c(S,null,C(i.activeAddons,(g,v)=>(n(),c("div",{key:v},[h(d,{size:"medium",modelValue:e.selectedAddons[g.sku],"onUpdate:modelValue":A=>e.selectedAddons[g.sku]=A,disabled:s.disabled},{default:u(()=>[w(m(g.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128)),p("div",null,[h(b,{type:"blue",size:"medium",onClick:o[0]||(o[0]=g=>t.$emit("update",i.selectedSkus)),loading:s.loading,disabled:s.disabled||i.selectedSkus.length===0},{default:u(()=>[w(m(e.strings.runAction),1)]),_:1},8,["loading","disabled"])])],64)):(n(),c("b",de,m(e.strings.noAddons),1))])}const pe=D(le,[["render",ue],["__scopeId","data-v-fbb0de3d"]]),me="all-in-one-seo-pack",he={emits:["update"],setup(){return{rootStore:y()}},components:{BaseCheckbox:$,GridColumn:Z,GridRow:ee},props:{loading:Boolean,disabled:Boolean},data(){return{options:{},strings:{updateOptions:k("Update Options",me)}}},mounted(){this.rootStore.aioseo.deprecatedOptions.forEach(t=>{t.enabled&&(this.options[t.value]=!0)})}},ge={class:"aioseo-deprecated-options"},_e=p("br",null,null,-1),be=p("br",null,null,-1),fe=p("br",null,null,-1);function Ae(t,o,s,r,e,i){const d=l("base-checkbox"),b=l("grid-column"),g=l("grid-row"),v=l("base-button");return n(),c("div",ge,[h(g,{class:"settings"},{default:u(()=>[(n(!0),c(S,null,C(r.rootStore.aioseo.deprecatedOptions,(A,M)=>(n(),f(b,{key:M,xl:"6",sm:"12"},{default:u(()=>[h(d,{size:"medium",modelValue:e.options[A.value],"onUpdate:modelValue":x=>e.options[A.value]=x,disabled:s.disabled},{default:u(()=>[w(m(A.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024))),128))]),_:1}),_e,h(v,{type:"blue",size:"medium",onClick:o[0]||(o[0]=A=>t.$emit("update",e.options)),loading:s.loading,disabled:s.disabled},{default:u(()=>[w(m(e.strings.updateOptions),1)]),_:1},8,["loading","disabled"]),be,fe])}const ke=D(he,[["render",Ae]]),we={setup(){return{optionsStore:Y()}},computed:{infoItems(){return[{label:"Migrated Version",value:this.optionsStore.internalOptions.internal.migratedVersion},{label:"First Activated",value:this.optionsStore.internalOptions.internal.firstActivated!==0?te.fromMillis(this.optionsStore.internalOptions.internal.firstActivated*1e3).toFormat("MMMM d, yyyy"):!1}]}}},ve={class:"v3-migration-info aioseo-description"},Se={class:"info-items"},ye={key:0},De={key:1};function Te(t,o,s,r,e,i){return n(),c("div",ve,[p("ul",Se,[(n(!0),c(S,null,C(i.infoItems,(d,b)=>(n(),c("li",{key:b},[d.value?(n(),c("span",ye,m(d.label),1)):T("",!0),d.value?(n(),c("span",De,m(d.value),1)):T("",!0)]))),128))])])}const Ce=D(we,[["render",Te]]),Me={class:"aioseo-writing-assistant"},xe={__name:"WritingAssistant",setup(t){const o=I(),s="all-in-one-seo-pack",r={resetLogins:k("Reset SEOBoost Logins",s)};let e=!1;const i=()=>{confirm(k("Are you sure you want to reset SEOBoost logins?",s))&&(e=!0,o.doTask({action:"aioseo-reset-seoboost-logins"}).finally(()=>{alert(k("SEOBoost logins have been reset.",s)),e=!1}))};return(d,b)=>{const g=l("base-button");return n(),c("div",Me,[h(g,{type:"blue",size:"medium",onClick:i,loading:L(e),disabled:L(e)},{default:u(()=>[w(m(r.resetLogins),1)]),_:1},8,["loading","disabled"])])}}},Le={setup(){return{rootStore:y(),toolsStore:I()}},components:{AddonsList:pe,CoreAlert:P,CoreCard:j,CoreMainTabs:q,CoreModal:J,CoreNetworkSiteSelector:Q,CoreSettingsRow:X,DeprecatedOptions:ke,MigrationInfo:Ce,SvgClose:F,WritingAssistant:xe},props:{extraActions:{type:Array,required:!1}},data(){return{site:{},tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",currentData:{},showAreYouSureModal:!1,doingAction:[],strings:{selectSite:"Select Site",cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"},alertLink:z.getPlainLink("Click here to open to the Scheduled Actions panel",this.rootStore.aioseo.urls.admin.scheduledActions,!0)}},computed:{areYouSureTitle(){return`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const t=_('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),o=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network cache.</strong>":"",s=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network plugin updates transient.</strong>":"";return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:`This action deletes all records of the <code>aioseo_cache</code> table in the database.${o}`,longDescription:"",showModal:!1,network:!0},{label:"Clear Plugin Updates Transient",slug:"clear-plugin-updates-transient",shortDescription:`This action clears the plugin updates transient, which forces WordPress Core to check for plugin updates.${s}`,longDescription:"",showModal:!1,network:!0},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:_("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",t),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0},{label:"Rerun Migrations for Active Addons",slug:"rerun-addon-migrations",shortDescription:"This action will rerun all update migrations for the selected addons.",longDescription:"",showModal:!0,component:"addons-list"}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:_("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",t),showModal:!1}]},{slug:"deprecated-options",name:"Deprecated Options",actions:[{label:"Deprecated Options",slug:"deprecated-options",shortDescription:"Enable or disable any options that have been deprecated in AIOSEO.",longDescription:"<strong>These options are not guaranteed to work and all support has been dropped.</strong>",showModal:!1,component:"deprecated-options"}]},{slug:"writing-assistant",name:"Writing Assistant",actions:[{label:"Writing Assistant",slug:"writing-assistant",shortDescription:"Resets all users SEOBoost logins.",longDescription:"",showModal:!1,component:"writing-assistant"}]}]},activeTabObject(){return this.tabs.find(t=>t.slug===this.activeTab)}},methods:{isActionDisabled(t){return this.rootStore.aioseo.data.isNetworkAdmin?this.site.blog_id?this.site.blog_id==="network"&&t.network?!1:this.site.blog_id==="network"&&!t.network:!0:!1},isLoading(t){return!!this.doingAction[t.slug]},getSelectedActionObject(t){let o=null;return this.actions.forEach(s=>{const r=s.options.find(e=>e.value===t);r&&(o=r)}),o},maybeDoAction(t,o){if(this.currentAction=t,this.currentData=o,t.showModal){this.showAreYouSureModal=!0;return}this.doAction(o)},doAction(t){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.toolsStore.doTask({action:this.currentAction.slug,siteId:this.site.blog_id||this.rootStore.aioseo.data.currentBlogId,data:t}).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(o=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,o)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}},beforeMount(){var o;let t=-1;if(this.rootStore.aioseo.data.v3Options&&(t=this.tabs.findIndex(s=>s.slug.toLowerCase()==="migrations"),t!==-1)){const s=_('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions);this.tabs[t].actions.push({label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:_("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",s),infoComponent:"MigrationInfo",showModal:!0})}(o=this.extraActions)!=null&&o.length&&this.extraActions.forEach(s=>{if(t=this.tabs.findIndex(r=>r.slug.toLowerCase()===s.slug.toLowerCase()),t!==-1){this.tabs[t].actions=this.tabs[t].actions.concat(s.actions);return}this.tabs.push(s)})}},Oe={class:"aioseo-tools-debug"},Be={key:0,class:"aioseo-settings-row"},Ve={class:"select-site"},Re=["innerHTML"],Ne=["innerHTML"],$e=["innerHTML"],Ie={class:"aioseo-modal-body"},Ee=["innerHTML"];function Ue(t,o,s,r,e,i){const d=l("core-network-site-selector"),b=l("core-alert"),g=l("core-main-tabs"),v=l("base-button"),A=l("core-settings-row"),M=l("svg-close"),x=l("core-modal"),E=l("core-card");return n(),c("div",Oe,[h(E,{slug:"debug","header-text":e.strings.cardLabel},{default:u(()=>[r.rootStore.aioseo.data.isNetworkAdmin?(n(),c("div",Be,[p("div",Ve,m(e.strings.selectSite),1),h(d,{onSelectedSite:o[0]||(o[0]=a=>e.site=a),"show-network":""})])):T("",!0),h(b,{type:"yellow"},{default:u(()=>[p("div",null,m(e.strings.alertWarning),1),p("div",{innerHTML:e.alertLink},null,8,Re)]),_:1}),(n(),f(g,{internal:"",key:e.tabsKey,tabs:i.tabs,active:e.activeTab,showSaveButton:!1,onChanged:o[1]||(o[1]=a=>e.activeTab=a)},null,8,["tabs","active"])),(n(!0),c(S,null,C(i.activeTabObject.actions,(a,U)=>(n(),f(A,{key:e.activeTab+U,name:a.label,align:""},{content:u(()=>[a.component?(n(),f(O(a.component),{key:0,onUpdate:B=>i.maybeDoAction(a,B),loading:e.doingAction[a.slug],disabled:i.isActionDisabled(a)},null,40,["onUpdate","loading","disabled"])):(n(),f(v,{type:"blue",size:"medium",onClick:B=>i.maybeDoAction(a),loading:e.doingAction[a.slug],key:e.doingActionKey,disabled:i.isActionDisabled(a)},{default:u(()=>[w(m(e.strings.buttonLabel),1)]),_:2},1032,["onClick","loading","disabled"])),p("div",{class:"aioseo-description",innerHTML:a.shortDescription},null,8,Ne),p("div",{class:"aioseo-description",innerHTML:a.longDescription},null,8,$e),a.infoComponent?(n(),f(O(a.infoComponent),{key:2})):T("",!0)]),_:2},1032,["name"]))),128)),h(x,{show:e.showAreYouSureModal,"no-header":"",onClose:o[6]||(o[6]=a=>e.showAreYouSureModal=!1),classes:["aioseo-debug-modal"]},{body:u(()=>[p("div",Ie,[p("button",{class:"close",onClick:o[3]||(o[3]=G(a=>e.showAreYouSureModal=!1,["stop"]))},[h(M,{onClick:o[2]||(o[2]=a=>e.showAreYouSureModal=!1)})]),p("h3",null,m(i.areYouSureTitle),1),p("div",{class:"description",innerHTML:e.strings.cannotBeUndone},null,8,Ee),h(v,{type:"blue",size:"medium",onClick:o[4]||(o[4]=a=>i.doAction(e.currentData))},{default:u(()=>[w(m(e.strings.yesDoAction),1)]),_:1}),h(v,{type:"gray",size:"medium",onClick:o[5]||(o[5]=a=>e.showAreYouSureModal=!1)},{default:u(()=>[w(m(e.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"])])}const He=D(Le,[["render",Ue]]),Ye={setup(){return{addonsStore:N(),rootStore:y()}},components:{Debug:He},computed:{extraActions(){const t=_('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),o=this.addonsStore.addons.find(e=>e.sku==="aioseo-video-sitemap"),s=this.addonsStore.addons.find(e=>e.sku==="aioseo-link-assistant"),r=[];return o.isActive&&r.push({slug:"sitemap",actions:[{label:"Clear Video Data",slug:"clear-video-data",shortDescription:"This action removes all video data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:_("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",t),showModal:!1}]}),s.isActive&&r.push({slug:"link-assistant",name:"Link Assistant",actions:[{label:"Clear Data",slug:"link-assistant-clear-data",shortDescription:"This action removes all Link Assistant data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:_("The various Link Assistant scans can be sped up through the %1$s",t),showModal:!0},{label:"Clear Links",slug:"link-assistant-clear-links",shortDescription:"This action removes all link data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:_("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_links_scan</code> action.",t),showModal:!0},{label:"Clear Suggestions",slug:"link-assistant-clear-suggestions",shortDescription:"This action removes all link suggestion data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:_("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_link_suggestions_scan</code> action.",t),showModal:!0},{label:"Undismiss Suggestions",slug:"link-assistant-undismiss-suggestions",shortDescription:"This action removes the dismissed state from all suggestions, which makes them appear in the UI again.",longDescription:_("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",t),showModal:!1}]}),r}}};function ze(t,o,s,r,e,i){const d=l("debug",!0);return n(),f(d,{extraActions:i.extraActions},null,8,["extraActions"])}const We=D(Ye,[["render",ze]]),_o={__name:"Main",setup(t){const o=y(),s=H(),r=V(()=>{switch(s.name){case"database-tools":return K;case"debug":return We;case"htaccess-editor":return oe;case"import-export":return se;case"system-status":return ie;case"wp-code":return ae;default:return ne}});re();const e="all-in-one-seo-pack",i=V(()=>s.name!=="system-status"&&s.name!=="import-export"&&s.name!=="database-tools"&&s.name!=="debug"&&s.name!=="wp-code"),d={pageName:o.aioseo.data.isNetworkAdmin?k("Network Tools",e):k("Tools",e)};return(b,g)=>(n(),f(L(W),{"page-name":d.pageName,"show-save-button":i.value},{default:u(()=>[(n(),f(O(r.value)))]),_:1},8,["page-name","show-save-button"]))}};export{_o as default};
