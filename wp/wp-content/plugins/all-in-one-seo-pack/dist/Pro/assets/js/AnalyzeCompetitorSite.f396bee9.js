import{G as B}from"./constants.ee441da2.js";import{o as D,a as V,p as U,v as E,n as j,b as G}from"./index.684c656d.js";import{u as H}from"./ScrollTo.81bea8a7.js";import{u as b}from"./SeoSiteScore.747eac8a.js";import{q as M}from"./helpers.2304d5ee.js";import{C as P,a as W}from"./Score.f042c135.js";import{C as q}from"./Blur.f5469924.js";import{C as w}from"./Card.bf13def3.js";import{o as l,d,H as m,w as h,c as k,x as R,r as F,u as p,e as r,t as n,a as z,b as S,l as K,y as c,G as Y,N as J}from"./runtime-dom.esm-bundler.d8b05b6d.js";import{C as Q}from"./SeoSiteAnalysisResults.f6d68881.js";import{C as X}from"./Index.dcc55865.js";import{S as Z}from"./Refresh.a0b52b84.js";import"./translations.d159963e.js";import{_ as x}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as i,s as T}from"./default-i18n.20001971.js";import{S as $}from"./index.62c20ef8.js";import"./Tooltip.f699c54b.js";import"./Caret.2e43336b.js";import"./Slide.53cdbff7.js";import"./helpers.aece81b9.js";import"./metabox.9787fdb7.js";import"./cleanForSlug.fc011207.js";import"./deburr.ef08c7b4.js";import"./toString.ddc58e67.js";import"./html.7cb59739.js";import"./contentHasAssets.e1428256.js";import"./_baseSet.a2dfaed5.js";import"./regex.8a6101c0.js";import"./GoogleSearchPreview.110cab87.js";import"./Url.ee93195e.js";import"./Information.5f425594.js";import"./Gear.532438a0.js";import"./Index.d097a08d.js";const ee={key:0,class:"aioseo-seo-site-score-cta"},te=["href"],se={__name:"CompetitorSiteHeader",setup(e){const{strings:t}=b(),s=D(),a=V();return(o,u)=>(l(),d("div",null,[m(p(w),{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1},{default:h(()=>[(l(),k(F(p(s).isUnlicensed?p(q):"div"),null,{default:h(()=>[R(o.$slots,"default")]),_:3})),p(s).isUnlicensed?(l(),d("div",ee,[r("a",{href:p(a).aioseo.urls.aio.settings},n(p(t).enterLicenseKey),9,te),z(" "+n(p(t).toAnalyzeCompetitorSite),1)])):S("",!0)]),_:3}),p(s).isUnlicensed?S("",!0):R(o.$slots,"competitor-results",{key:0})]))}},y="all-in-one-seo-pack",oe={setup(e){const{description:t,strings:s}=b({score:K(e.score)});return{analyzerStore:U(),composableStrings:s,description:t}},components:{CoreSiteScore:X,SvgRefresh:Z},props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:E(this.composableStrings,{criticalIssues:i("Important Issues",y),warnings:i("Warnings",y),recommendedImprovements:i("Recommended Improvements",y),goodResults:i("Good Results",y),completeSiteAuditChecklist:i("Complete Site Audit Checklist",y),refreshResults:i("Refresh Results",y),mobileSnapshot:i("Mobile Snapshot",y)})}},methods:{refresh(){this.isAnalyzing=!0,this.analyzerStore.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>{this.isAnalyzing=!1,this.$emit("refresh")})}}},re={class:"aioseo-site-score-competitor"},ie={class:"aioseo-seo-site-score-score"},ne={class:"aioseo-seo-site-score-recommendations"},ae={class:"critical"},le={class:"round red"},ce={class:"recommended"},me={class:"round blue"},ue={class:"good"},pe={class:"round green"},he={key:0,class:"mobile-snapshot"},de=["src"];function ye(e,t,s,a,o,u){const C=c("core-site-score"),A=c("svg-refresh"),v=c("base-button");return l(),d("div",re,[r("div",ie,[m(C,{loading:o.isAnalyzing||s.loading,score:s.score,description:a.description},null,8,["loading","score","description"])]),r("div",ne,[r("div",ae,[r("span",le,n(s.summary.critical||0),1),z(" "+n(o.strings.criticalIssues),1)]),r("div",ce,[r("span",me,n(s.summary.recommended||0),1),z(" "+n(o.strings.recommendedImprovements),1)]),r("div",ue,[r("span",pe,n(s.summary.good||0),1),z(" "+n(o.strings.goodResults),1)])]),m(v,{class:"refresh-results",type:"gray",size:"small",onClick:u.refresh,loading:o.isAnalyzing},{default:h(()=>[m(A),z(" "+n(o.strings.refreshResults),1)]),_:1},8,["onClick","loading"]),s.mobileSnapshot?(l(),d("div",he,[r("div",null,n(o.strings.mobileSnapshot),1),r("img",{alt:"Mobile Snapshot",src:s.mobileSnapshot},null,8,de)])):S("",!0)])}const _e=x(oe,[["render",ye]]),_="all-in-one-seo-pack",ge={setup(){const{strings:e}=b(),{scrollTo:t}=H();return{analyzerStore:U(),settingsStore:j(),composableStrings:e,scrollTo:t}},components:{CoreAnalyze:P,CoreAnalyzeScore:W,CoreAnalyzeCompetitorSiteHeader:se,CoreCard:w,CoreSeoSiteAnalysisResults:Q,CoreSiteScoreCompetitor:_e,SvgTrash:$},data(){return{competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:E(this.composableStrings,{enterCompetitorUrl:i("Enter Competitor URL",_),performInDepthAnalysis:i("Perform in-depth SEO Analysis of your competitor's website.",_),analyze:i("Analyze",_),pleaseEnterValidUrl:i("Please enter a valid URL.",_)})}},watch:{"analyzerStore.analyzeError"(e){e&&(this.isAnalyzing=!1)}},computed:{getError(){switch(this.analyzerStore.analyzeError){case"invalid-url":return i("The URL provided is invalid.",_);case"missing-content":return T("%1$s %2$s",i("We were unable to parse the content for this site.",_),G.getDocLink(B.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return T(i("Your site is not connected. Please connect to %1$s, then try again.",_),"AIOSEO")}return this.analyzerStore.analyzeError}},methods:{getSummary(e){return{recommended:this.analyzerStore.recommendedCount(e),critical:this.analyzerStore.criticalCount(e),good:this.analyzerStore.goodCount(e)}},startAnalyzing(e){if(this.inputError=!1,this.competitorUrl=e,!this.competitorUrl.startsWith("http://")&&!this.competitorUrl.startsWith("https")&&(this.competitorUrl="https://"+this.competitorUrl),!M(this.competitorUrl)){this.inputError=!0;return}this.analyzerStore.analyzing=!0,this.analyzerStore.analyzeError=!1,this.analyzerStore.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzerStore.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.$nextTick(async()=>{this.competitorResults=await this.analyzerStore.getCompetitorSiteAnalysisResults();const e=Object.keys(this.competitorResults),t=e.indexOf(this.competitorUrl)===-1?0:e.indexOf(this.competitorUrl);this.toggleCard(t),this.scrollTo("aioseo-competitor-results"+this.hashCode(e[t])),this.competitorUrl=null})},startDeleteSite(e){this.closeAllCards(),delete this.competitorResults[e],this.analyzerStore.deleteCompetitorSite(e)},closeAllCards(){Object.keys(this.competitorResults).forEach(t=>{this.settingsStore.closeCard("analyzeCompetitorSite"+t)})},toggleCard(e){const t=Object.keys(this.competitorResults);this.settingsStore.toggleCard({slug:"analyzeCompetitorSite"+t[e]})},hashCode(e){if(!e)return;let t=0,s,a;for(s=0;s<e.length;s++)a=e.charCodeAt(s),t=(t<<5)-t+a,t|=0;return t},async refresh(){this.competitorResults=await this.analyzerStore.getCompetitorSiteAnalysisResults()}},async mounted(){var t,s;this.analyzerStore.analyzeError=!1,this.competitorResults=this.analyzerStore.competitors;const e=Object.keys(this.competitorResults);(s=(t=this.settingsStore)==null?void 0:t.settings)!=null&&s.toggledCards[`analyzeCompetitorSite${e[0]}`]||this.toggleCard(0)}},Se={class:"aioseo-analyze-competitor-site"},fe={key:0,class:"aioseo-description aioseo-error"},ze=["innerHTML"],Ce={class:"competitor-results-main"},Ae={class:"competitor-results-body"};function ve(e,t,s,a,o,u){const C=c("core-analyze"),A=c("core-analyze-score"),v=c("svg-trash"),I=c("core-site-score-competitor"),L=c("core-seo-site-analysis-results"),O=c("core-card"),N=c("core-analyze-competitor-site-header");return l(),d("div",Se,[m(N,null,{"competitor-results":h(()=>[(l(!0),d(Y,null,J(o.competitorResults,(f,g)=>(l(),k(O,{key:g,id:"aioseo-competitor-results"+u.hashCode(g),slug:"analyzeCompetitorSite"+g,"save-toggle-status":!1,class:"aioseo-competitor-results-wrapper"},{header:h(()=>[m(A,{score:f.score},null,8,["score"]),r("span",null,n(g),1),o.isAnalyzing?S("",!0):(l(),k(v,{key:0,onClick:ke=>u.startDeleteSite(g)},null,8,["onClick"]))]),default:h(()=>[r("div",Ce,[m(I,{site:g,score:f.score,loading:a.analyzerStore.analyzing,summary:u.getSummary(f.results),"mobile-snapshot":f.results.advanced.mobileSnapshot,onRefresh:u.refresh},null,8,["site","score","loading","summary","mobile-snapshot","onRefresh"]),r("div",Ae,[m(L,{section:"all-items","all-results":f.results,"show-google-preview":""},null,8,["all-results"])])])]),_:2},1032,["id","slug"]))),128))]),default:h(()=>[m(C,{header:o.strings.enterCompetitorUrl,description:o.strings.performInDepthAnalysis,inputError:o.inputError,isAnalyzing:o.isAnalyzing,analyzeTime:o.analyzeTime,placeholder:"https://competitorwebsite.com",onStartAnalyzing:u.startAnalyzing},{errors:h(()=>[o.inputError?(l(),d("div",fe,n(o.strings.pleaseEnterValidUrl),1)):S("",!0),a.analyzerStore.analyzer==="competitor-site"&&a.analyzerStore.analyzeError?(l(),d("div",{key:1,class:"analyze-errors aioseo-description aioseo-error",innerHTML:a.analyzerStore.analyzeError},null,8,ze)):S("",!0)]),_:1},8,["header","description","inputError","isAnalyzing","analyzeTime","onStartAnalyzing"])]),_:1})])}const rt=x(ge,[["render",ve]]);export{rt as default};
