import{m as L,A as O,e as G,a as P,x as B}from"./index.684c656d.js";import{n as E}from"./numbers.9fc174f3.js";import{j as D}from"./helpers.2304d5ee.js";import{q as X}from"./vue3-apexcharts.df5d4d67.js";import{b as U,a as Z}from"./Caret.2e43336b.js";import{a as J}from"./Tooltip.f699c54b.js";import{C as W}from"./Index.f979fbbe.js";import{U as z,u as F}from"./UserAvatar.48a5f7f3.js";import{t as Y}from"./html.7cb59739.js";import"./translations.d159963e.js";import{y as _,o as a,c as b,w as f,a as S,t as l,e as n,H as g,d as m,b as c,J as k,Q,S as $,L as A,G as T,N as I,K as j}from"./runtime-dom.esm-bundler.d8b05b6d.js";import{_ as M}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as h,s as V}from"./default-i18n.20001971.js";import{S as ee}from"./Eye.964a5b32.js";import{S as te}from"./index.62c20ef8.js";const N="aioseo-pro",ie={setup(){const{getAuthorEmailAndLogin:i}=F();return{getAuthorEmailAndLogin:i,searchStatisticsStore:L(),seoRevisionsStore:O()}},components:{CoreModal:W,UtilUserAvatar:z},props:{modalOpenDeleteRevisionWarning:{type:Boolean,required:!0},revision:{type:Object,required:!0}},data(){return{btnDeleteRevisionLoading:!1,strings:{areYouSureDeleteRevision:h("Are you sure you want to delete the following revision? This cannot be undone.",N),deleteRevision:h("Delete Revision",N),noChangedMind:h("No, I changed my mind",N),revisionBy:h("Revision by",N),yesDeleteRevision:h("Yes, delete revision",N)}}},methods:{initDelete(){this.btnDeleteRevisionLoading=!0,this.seoRevisionsStore.delete(this.revision.id).then(i=>{this.$parent.modalOpenDeleteRevisionWarning=!1,this.seoRevisionsStore.items=i.body.items,this.searchStatisticsStore.deleteSeoRevision(this.revision)}).finally(()=>{this.btnDeleteRevisionLoading=!1})},truncate:Y}},se={class:"aioseo-seo-revisions-delete-warning__body"},oe={class:"aioseo-seo-revisions-delete-warning__text"},ne={class:"aioseo-seo-revisions-delete-warning__revision"},re={class:"aioseo-seo-revisions-delete-warning__revision__avatar"},ae={class:"aioseo-seo-revisions-delete-warning__revision__data text-truncate"},le=["title"],de=["textContent"],me=n("span",null,"Â ",-1),ce=["textContent"],ue=["textContent"],he={class:"aioseo-seo-revisions-delete-warning__revision__data__date"},pe=n("br",null,null,-1),_e={class:"aioseo-seo-revisions-delete-warning__action"};function ve(i,e,s,d,t,o){const r=_("util-user-avatar"),u=_("base-button"),y=_("core-modal");return a(),b(y,{show:i.$parent.modalOpenDeleteRevisionWarning,onClose:e[2]||(e[2]=w=>i.$parent.modalOpenDeleteRevisionWarning=!1),classes:["aioseo-seo-revisions-delete-warning"]},{headerTitle:f(()=>[S(l(t.strings.deleteRevision),1)]),body:f(()=>{var w,p,v;return[n("div",se,[n("p",oe,l(t.strings.areYouSureDeleteRevision),1),n("div",ne,[n("div",re,[g(r,{src:s.revision.author.avatar.url,size:s.revision.author.avatar.size},null,8,["src","size"])]),n("div",ae,[n("span",{title:d.getAuthorEmailAndLogin(s.revision),class:"aioseo-seo-revisions-delete-warning__revision__data__author"},[n("span",{textContent:l(t.strings.revisionBy)},null,8,de),me,n("span",{textContent:l(o.truncate(s.revision.author.display_name,30))},null,8,ce)],8,le),(w=s.revision)!=null&&w.note?(a(),m("span",{key:0,class:"aioseo-seo-revisions-delete-warning__revision__data__note",textContent:l(s.revision.note)},null,8,ue)):c("",!0),n("span",he,[pe,S(" "+l((v=(p=s.revision)==null?void 0:p.date)==null?void 0:v.created_formatted),1)])])]),n("div",_e,[g(u,{type:"gray",size:"medium",onClick:e[0]||(e[0]=k(C=>i.$parent.modalOpenDeleteRevisionWarning=!1,["prevent","exact"]))},{default:f(()=>[S(l(t.strings.noChangedMind),1)]),_:1}),g(u,{type:"blue",size:"medium",loading:t.btnDeleteRevisionLoading,onClick:e[1]||(e[1]=k(C=>o.initDelete(),["prevent","exact"]))},{default:f(()=>[S(l(t.strings.yesDeleteRevision),1)]),_:1},8,["loading"])])])]}),_:1},8,["show"])}const ge=M(ie,[["render",ve]]),x="aioseo-pro",fe={setup(){const{getAuthorEmailAndLogin:i}=F();return{getAuthorEmailAndLogin:i,postEditorStore:G(),rootStore:P(),searchStatisticsStore:L(),seoRevisionsStore:O()}},components:{CoreLoader:U,SvgEye:ee,SvgTrash:te,UtilUserAvatar:z},props:{isCurrentVersion:{required:!0,type:Boolean,default(){return!1}},revision:{type:Object,default(){return{}}},compareTo:{type:Object,default(){return{}}},context:String},data(){return{isUpdating:!1,noteElements:{input:{maxlength:this.seoRevisionsStore.noteMaxlength,visible:!1,value:this.revision.note},btnAdd:{visible:!1},btnEdit:{visible:!1}},strings:{addNote:h("Add Note",x),compare:h("Compare",x),compareAgainstCurrent:h("Compare against current version",x),currentVersion:h("Current Version",x),deleteRevision:h("Delete revision",x),editNote:h("Edit Note",x),typeToAddNote:h("Type to add note",x),viewRevision:h("View revision",x)}}},watch:{revision(i){this.noteElements.input.value=i.note}},computed:{itemCompareUrl(){return this.compareTo.id?`${this.rootStore.aioseo.urls.aio.seoRevisions}&from=${this.revision.id}&to=${this.compareTo.id}`:`${this.rootStore.aioseo.urls.aio.seoRevisions}&from=${this.revision.id}&to=${this.seoRevisionsStore.items[0].id}`},itemViewUrl(){return`${this.rootStore.aioseo.urls.aio.seoRevisions}&to=${this.revision.id}&context=${this.postEditorStore.currentPost.postType||this.postEditorStore.currentPost.termType}`}},methods:{truncate:Y,focusInputNote(){setTimeout(()=>{this.$refs.itemWrapper.querySelector("input").focus()},50)},onBlurInputNote(){this.noteElements.input.value!==this.revision.note?this.updateNote():this.onKeyUpEscInputNote()},onKeyUpEnterInputNote(){this.noteElements.input.value!==this.revision.note&&this.updateNote()},onKeyUpEscInputNote(){this.noteElements.input.value=this.revision.note,this.setNoteElementVisibility("input",!1)},onClickBtnAddNote(){this.setNoteElementVisibility("input",!0),this.setNoteElementVisibility("btnAdd",!1),this.focusInputNote()},onClickBtnEditNote(){this.setNoteElementVisibility("input",!0),this.setNoteElementVisibility("btnEdit",!1),this.focusInputNote()},onFocusItem(){this.onMouseEnterItem()},onMouseEnterItem(){this.isNoteElementVisible("input")||(this.revision.note?this.setNoteElementVisibility("btnEdit",!0):this.setNoteElementVisibility("btnAdd",!0))},onMouseLeaveItem(){this.setNoteElementVisibility("btnAdd",!1),this.setNoteElementVisibility("btnEdit",!1)},isNoteElementVisible(i){return this.noteElements[i].visible},setNoteElementVisibility(i,e){this.noteElements[i].visible=e},updateNote(){this.isUpdating=!0,this.seoRevisionsStore.update({id:this.revision.id,payload:{note:this.noteElements.input.value}}).then(i=>{const e=this.seoRevisionsStore.items.findIndex(s=>s.id===i.body.item.id);this.seoRevisionsStore.items.splice(e,1,i.body.item),this.searchStatisticsStore.updateSeoRevision(this.seoRevisionsStore.items),this.setNoteElementVisibility("input",!1)}).finally(()=>{this.isUpdating=!1})}}},ye={class:"aioseo-seo-revision-list-item__input-wrapper"},ke={key:0,class:"aioseo-seo-revision-list-item__note text-truncate"},be=["maxlength","placeholder"],we={class:"aioseo-seo-revision-list-item__author"},xe={class:"aioseo-seo-revision-list-item__author__avatar"},Se=["title"],Ce=["title"],Ee={class:"aioseo-seo-revision-list-item__action"},Re={class:"aioseo-wrapper"},De={key:0,class:"str-current-version"},Ne=["href","title"],Me={class:"aioseo-wrapper"},Ae=["href","title"],Te=["title"],Ie={key:1,class:"loader"};function Ve(i,e,s,d,t,o){const r=_("util-user-avatar"),u=_("svg-eye"),y=_("svg-trash"),w=_("core-loader");return a(),m("div",{role:"listitem",class:"aioseo-seo-revision-list-item",tabindex:"0",ref:"itemWrapper",onFocus:e[9]||(e[9]=p=>o.onFocusItem()),onMouseenter:e[10]||(e[10]=p=>o.onMouseEnterItem()),onMouseleave:e[11]||(e[11]=p=>o.onMouseLeaveItem())},[n("div",ye,[s.revision.note&&!o.isNoteElementVisible("input")?(a(),m("span",ke,l(s.revision.note),1)):c("",!0),o.isNoteElementVisible("input")?Q((a(),m("input",{key:1,type:"text",maxlength:t.noteElements.input.maxlength,placeholder:t.strings.typeToAddNote,"onUpdate:modelValue":e[0]||(e[0]=p=>t.noteElements.input.value=p),onBlur:e[1]||(e[1]=k(p=>o.onBlurInputNote(),["prevent"])),onKeyup:[e[2]||(e[2]=A(k(p=>o.onKeyUpEnterInputNote(),["prevent"]),["enter"])),e[3]||(e[3]=A(k(p=>o.onKeyUpEscInputNote(),["prevent"]),["esc"]))],onKeydown:e[4]||(e[4]=A(k(()=>{},["prevent"]),["enter"]))},null,40,be)),[[$,t.noteElements.input.value]]):c("",!0),o.isNoteElementVisible("btnEdit")?(a(),m("button",{key:2,class:"aioseo-seo-revision-list-item__btn-edit-note",onClick:e[5]||(e[5]=k(p=>o.onClickBtnEditNote(),["prevent"]))},l(t.strings.editNote),1)):c("",!0)]),n("div",we,[n("span",xe,[g(r,{src:s.revision.author.avatar.url,size:s.revision.author.avatar.size},null,8,["src","size"])]),s.revision.author.display_name?(a(),m("span",{key:0,title:d.getAuthorEmailAndLogin(s.revision),class:"aioseo-seo-revision-list-item__author__name text-truncate"},l(o.truncate(s.revision.author.display_name,30)),9,Se)):c("",!0),o.isNoteElementVisible("btnAdd")&&(s.context||i.$root.$data.screenContext)==="sidebar"?(a(),m("button",{key:1,class:"aioseo-seo-revision-list-item__btn-add-note",onClick:e[6]||(e[6]=k(p=>o.onClickBtnAddNote(),["prevent"]))},l(t.strings.addNote),1)):c("",!0)]),n("div",{class:"aioseo-seo-revision-list-item__date text-truncate",title:s.revision.date.created_formatted},l(s.revision.date.created_formatted),9,Ce),o.isNoteElementVisible("btnAdd")&&(s.context||i.$root.$data.screenContext)==="metabox"?(a(),m("button",{key:0,class:"aioseo-seo-revision-list-item__btn-add-note",onClick:e[7]||(e[7]=k(p=>o.onClickBtnAddNote(),["prevent"]))},l(t.strings.addNote),1)):c("",!0),n("div",Ee,[n("div",Re,[s.isCurrentVersion?(a(),m("div",De,l(t.strings.currentVersion),1)):(a(),m("a",{key:1,href:o.itemCompareUrl,title:t.strings.compareAgainstCurrent,target:"_blank",class:"aioseo-seo-revision-list-item__action__compare"},l(t.strings.compare),9,Ne)),n("div",Me,[n("a",{href:o.itemViewUrl,title:t.strings.viewRevision,target:"_blank",class:"aioseo-seo-revision-list-item__action__view"},[g(u)],8,Ae),s.isCurrentVersion?c("",!0):(a(),m("button",{key:0,class:"aioseo-seo-revision-list-item__action__delete",onClick:e[8]||(e[8]=k(p=>i.$emit("maybeDeleteSeoRevision",s.revision),["prevent"])),title:t.strings.deleteRevision},[g(y)],8,Te))])])]),t.isUpdating?(a(),m("div",Ie,[g(w)])):c("",!0)],544)}const Be=M(fe,[["render",Ve],["__scopeId","data-v-b257593f"]]),H=""+window.__aioseoDynamicImportPreload__("svg/aioseo.da6097fa.svg"),K=""+window.__aioseoDynamicImportPreload__("svg/google.826e7131.svg"),q=""+window.__aioseoDynamicImportPreload__("svg/wordpress.8166fa94.svg"),R="aioseo-pro",Pe={emits:["update"],setup(){return{rootStore:P()}},components:{CoreModal:W,SeoRevisionsDeleteWarning:ge,SeoRevisionListItem:Be,SvgCaret:Z},props:{date:{type:String,default:""},timelineMarkers:{type:Object,default:()=>{}}},data(){return{item:{},itemToBeDeleted:{},modalOpen:!1,modalOpenDeleteRevisionWarning:!1,strings:{theFollowingChanges:h("The following changes were made that could affect your site rankings:",R),readMore:h("Read More",R),viewRevisions:h("View Revisions",R)}}},watch:{items(i){this.item={},i.length===1&&(this.item=i[0])}},computed:{types(){let i=[{name:"wpRevision",title:V(h("%1$s Revisions",R),"WordPress"),icon:D(q)},{name:"aioseoRevision",title:V(h("%1$s Revisions",R),"AIOSEO"),icon:D(H)},{name:"googleUpdate",title:V(h("%1$s Updates",R),"Google"),icon:D(K)}];return i=i.map(e=>({...e,count:this.items.filter(s=>s.type===e.name).length})),i=i.filter(e=>0<e.count),i},type(){return this.types.find(i=>i.name===this.item.type)||{}},title(){return this.date?B(new Date(this.date+" 00:00:00"),this.rootStore.aioseo.data.dateFormat):""},items(){return this.timelineMarkers[this.date]||[]},showTypeSelector(){return 1<this.items.length&&Object.keys(this.item).length===0},showBackButton(){return 1<this.items.length}},methods:{back(i){this.item=this.items.find(e=>e.type===i)||{}},maybeDeleteSeoRevision(i){this.modalOpenDeleteRevisionWarning=!0,this.itemToBeDeleted=i}},mounted(){this.items.length===1&&(this.item=this.items[0])},updated(){this.$emit("update",{item:this.item,modal:this.modalOpen})}},Le={class:"aioseo-graph-timeline-markers"},Oe={class:"aioseo-graph-timeline-markers-title"},Ue={key:0,class:"aioseo-graph-timeline-markers-types"},We=["onClick"],ze={class:"aioseo-graph-timeline-markers-types__item-icon"},Fe=["alt","src"],Ye={class:"aioseo-graph-timeline-markers-types__item-title"},je={class:"aioseo-graph-timeline-markers-types__item-arrow"},He={key:1,class:"aioseo-graph-timeline-markers-item"},Ke={class:"aioseo-graph-timeline-markers-types__item"},qe={class:"aioseo-graph-timeline-markers-types__item-icon"},Ge=["alt","src"],Xe={class:"aioseo-graph-timeline-markers-types__item-title"},Ze={key:0},Je={class:"aioseo-graph-timeline-markers-item__title"},Qe={class:"aioseo-graph-timeline-markers-item__content"},$e={class:"aioseo-graph-timeline-markers-item__footer"},et={key:1},tt={class:"aioseo-graph-timeline-markers-item__title"},it={class:"aioseo-graph-timeline-markers-item__content"},st={class:"aioseo-graph-timeline-markers-item__footer"},ot={class:"aioseo-graph-timeline-markers-modal__body"},nt={key:0,class:"aioseo-graph-timeline-markers__revisions aioseo-graph-timeline-markers__revisions--wordpress"},rt={class:"aioseo-revision__title"},at=["innerHTML"],lt={key:1,class:"aioseo-graph-timeline-markers__revisions aioseo-graph-timeline-markers__revisions--aioseo"},dt={class:"aioseo-seo-revisions-list"};function mt(i,e,s,d,t,o){const r=_("svg-caret"),u=_("base-button"),y=_("seo-revision-list-item"),w=_("core-modal"),p=_("seo-revisions-delete-warning");return a(),m("div",Le,[n("div",Oe,l(o.title),1),o.showTypeSelector?(a(),m("div",Ue,[(a(!0),m(T,null,I(o.types,(v,C)=>(a(),m("div",{key:C,onClick:()=>o.back(v.name),class:"aioseo-graph-timeline-markers-types__item aioseo-graph-timeline-markers-types__item--clickable"},[n("div",ze,[n("img",{alt:v.name,src:v.icon},null,8,Fe)]),n("div",Ye,l(v.title)+" ("+l(v.count)+")",1),n("div",je,[g(r)])],8,We))),128))])):c("",!0),o.showTypeSelector?c("",!0):(a(),m("div",He,[n("div",Ke,[n("div",qe,[n("img",{alt:o.type.name,src:o.type.icon},null,8,Ge)]),n("div",Xe,l(o.type.title),1)]),t.item.type==="aioseoRevision"||t.item.type==="wpRevision"?(a(),m("div",Ze,[n("div",Je,l(t.strings.theFollowingChanges),1),n("div",Qe,l(t.item.fields.join(", ")),1),n("div",$e,[o.showBackButton?(a(),b(u,{key:0,type:"gray",onClick:e[0]||(e[0]=()=>o.back()),size:"small"},{default:f(()=>[g(r)]),_:1})):c("",!0),t.item.type==="aioseoRevision"?(a(),b(u,{key:1,type:"blue",size:"small",onClick:e[1]||(e[1]=()=>t.modalOpen=!0)},{default:f(()=>[S(l(t.strings.viewRevisions),1)]),_:1})):c("",!0),t.item.type==="wpRevision"?(a(),b(u,{key:2,href:t.item.link,type:"blue",tag:"a",target:"_blank",size:"small"},{default:f(()=>[S(l(t.strings.viewRevisions),1)]),_:1},8,["href"])):c("",!0)])])):c("",!0),t.item.type==="googleUpdate"?(a(),m("div",et,[n("div",tt,l(t.item.title),1),n("div",it,l(t.item.description),1),n("div",st,[o.showBackButton?(a(),b(u,{key:0,type:"gray",onClick:e[2]||(e[2]=()=>o.back()),size:"small"},{default:f(()=>[g(r)]),_:1})):c("",!0),t.item.link?(a(),b(u,{key:1,type:"blue",tag:"a",href:t.item.link,target:"_blank",size:"small"},{default:f(()=>[S(l(t.strings.readMore),1)]),_:1},8,["href"])):c("",!0),n("div",{class:j(["aioseo-graph-timeline-markers-item__footer-status",`aioseo-graph-timeline-markers-item__footer-status--${t.item.status}`])},l(t.item.status),3)])])):c("",!0)])),g(w,{show:t.modalOpen,classes:["aioseo-graph-timeline-markers-modal"],onClose:e[3]||(e[3]=()=>t.modalOpen=!1)},{headerTitle:f(()=>[S(l(o.type.title),1)]),body:f(()=>[n("div",ot,[t.item.type==="wpRevision"?(a(),m("div",nt,[(a(!0),m(T,null,I(t.item.diff,(v,C)=>(a(),m("div",{key:C,class:"aioseo-graph-timeline-markers__revisions-item"},[n("div",rt,l(v.name),1),n("div",{class:"aioseo-revision__content",innerHTML:v.diff},null,8,at)]))),128))])):c("",!0),t.item.type==="aioseoRevision"?(a(),m("div",lt,[n("div",dt,[(a(!0),m(T,null,I(t.item.revisions,(v,C)=>(a(),b(y,{key:"seo-revision-list-item-"+C,class:"aioseo-graph-timeline-markers__revisions-item",revision:v,compareTo:t.item.compareTo,isCurrentVersion:v.id===t.item.compareTo.id,context:"metabox",onMaybeDeleteSeoRevision:o.maybeDeleteSeoRevision},null,8,["revision","compareTo","isCurrentVersion","onMaybeDeleteSeoRevision"]))),128))])])):c("",!0)])]),_:1},8,["show"]),t.itemToBeDeleted?(a(),b(p,{key:2,modalOpenDeleteRevisionWarning:t.modalOpenDeleteRevisionWarning,revision:t.itemToBeDeleted},null,8,["modalOpenDeleteRevisionWarning","revision"])):c("",!0)])}const ct=M(Pe,[["render",mt]]),ut={setup(){return{rootStore:P()}},components:{apexchart:X,CoreLoader:U,CorePopper:J,GraphTimelineMarkers:ct},props:{series:{type:Array,required:!0},chartOverrides:{type:Object,default:()=>({})},height:{type:Number,default(){return 350}},legendStyle:{type:String,default(){return"custom"}},loading:{type:Boolean,default:!1},timelineMarkers:{type:Object,default:()=>({})},multiAxis:Boolean,preset:String,invertYAxis:Boolean},data(){return{isMounted:!1,reversedYAxis:!1,colors:["#005AE0","#00AA63","#F18200","#DF2A4A","#8B5CF6","#D946EF"],presets:{overview:{chart:{type:"area",sparkline:{enabled:!0}},grid:{show:!1,padding:{top:2,right:2,bottom:0,left:2}},xaxis:{show:!1},yaxis:{show:!1,labels:{show:!1,formatter:i=>i?E.compactNumber(i):0}}},keywordsDistribution:{chart:{type:"bar",zoom:{enabled:!1},toolbar:{show:!1}},fill:{type:"solid"},stroke:{width:0},xaxis:{type:"category"},yaxis:{forceNiceScale:!1,tickAmount:2,max:100,labels:{formatter:i=>i.toFixed(0)+"%"}},tooltip:{}}},timelineMarkersDate:null}},computed:{getSeries(){const i=this.series;if(!this.invertYAxis||!i.length)return i;const e=i[0].data.map(r=>r.y),s=[];let t=e.map((r,u)=>({value:r,index:u})).sort((r,u)=>r.value-u.value);const o=r=>(s[r[0].index]=r[r.length-1].value,s[r[r.length-1].index]=r[0].value,r=r.slice(1,r.length-1),r);for(;t.length;)t=o(t);return i[0].data=i[0].data.map((r,u)=>({...r,y:s[u],label:r.y})),i},chartDefaults(){const i=this.series;return{colors:this.colors,chart:{type:"area",zoom:{enabled:!1},toolbar:{show:!1},animations:{enabled:!0,easing:"easeout",speed:600,animateGradually:{enabled:!0,delay:50}},parentHeightOffset:0},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.9,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},title:{show:!1},grid:{show:!0,strokeDashArray:0,borderColor:"#D0D1D7",yaxis:{lines:{show:!0}},xaxis:{lines:{show:!1}},padding:{top:20,right:20,bottom:20,left:20}},xaxis:{type:"datetime",labels:{show:!0,minHeight:35,trim:!1,rotateAlways:!1,offsetY:6,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"d MMM",hour:""}},tooltip:{enabled:!1,x:{formatter:(e,s)=>{var t,o;const d=new Date(`${(o=(t=i[s.seriesIndex])==null?void 0:t.data[s.dataPointIndex])==null?void 0:o.x} 00:00:00`);return B(d,this.rootStore.aioseo.data.dateFormat)}}},axisBorder:{show:!0,color:"#D0D1D7",height:1,width:"100%",offsetX:0,offsetY:0},axisTicks:{show:!0,borderType:"solid",color:"#E8E8EB",height:12,offsetX:0,offsetY:0}},yaxis:[{labels:{show:!0,formatter:(e,s,d)=>{var o;if(!this.invertYAxis||!(d!=null&&d.config))return e?E.compactNumber(e):0;const t=[...(o=d==null?void 0:d.globals)==null?void 0:o.yAxisScale[0].result].reverse();return t[s]&&(e=t[s]),e?E.compactNumber(e):0}}}],tooltip:{enabled:!0,x:{formatter:(e,s)=>{var t,o;const d=new Date(`${(o=(t=i[s.seriesIndex])==null?void 0:t.data[s.dataPointIndex])==null?void 0:o.x} 00:00:00`);return B(d,this.rootStore.aioseo.data.dateFormat)}},y:{formatter:(e,s)=>{var d,t,o;return this.invertYAxis&&((d=i[s.seriesIndex])!=null&&d.data[s.dataPointIndex].label)?(t=i[s.seriesIndex])==null?void 0:t.data[s.dataPointIndex].label:E.compactNumber((o=i[s.seriesIndex])==null?void 0:o.data[s.dataPointIndex].y)}}},legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,position:"bottom",horizontalAlign:"center",floating:!1,fontSize:"14px",fontWeight:400,formatter:(e,s)=>{var o,r,u,y;const d=((r=(o=i[s.seriesIndex])==null?void 0:o.legend)==null?void 0:r.name)||e;if(this.legendStyle==="simple")return[d];let t=((y=(u=i[s.seriesIndex])==null?void 0:u.legend)==null?void 0:y.total)||"";return isNaN(t)||(t=E.compactNumber(t)),[`<strong>${t}</strong>`,d]},inverseOrder:!1,width:void 0,height:void 0,tooltipHoverFormatter:void 0,customLegendItems:[],offsetX:0,offsetY:0,markers:{width:16,height:16,strokeWidth:0,strokeColor:"#fff",fillColors:void 0,radius:16,customHTML:()=>this.legendStyle==="simple"?"":'<span class="marker-checkbox"><svg viewBox="0 0 14 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8542 1.37147C11.44 0.785682 12.3897 0.785682 12.9755 1.37147C13.5613 1.95726 13.5613 2.907 12.9755 3.49279L6.04448 10.4238C5.74864 10.7196 5.35996 10.8661 4.97222 10.8631C4.58548 10.8653 4.19805 10.7189 3.90298 10.4238L1.0243 7.5451C0.438514 6.95931 0.438514 6.00956 1.0243 5.42378C1.61009 4.83799 2.55983 4.83799 3.14562 5.42378L4.97374 7.2519L10.8542 1.37147Z" fill="currentColor" /></svg></span>',onClick:void 0,offsetX:0,offsetY:0},itemMargin:{horizontal:0,vertical:0},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},annotations:{points:this.annotationsPoints}}},multiAxisDefaults(){const i=this.series,e={yaxis:[]};return i.forEach((s,d)=>{e.yaxis.push({title:{text:s.name.replace("Search ","")},seriesName:s.name,opposite:d===1,labels:{show:!0,formatter:t=>t?E.compactNumber(t):0}})}),e},annotationsPoints(){const i=[];return this.timelineMarkers&&Object.keys(this.timelineMarkers).forEach(e=>{const s={x:new Date(e).getTime(),y:0,yAxisIndex:0,seriesIndex:0,mouseEnter:(t,o)=>{let r=o.target;o.relatedTarget.tagName.toLowerCase()==="circle"&&(r=o.relatedTarget),this.timelineMarkersDate=e,this.showTimelineMarkersTooltip(r)},mouseLeave:(t,o)=>{o.toElement.className==="string"&&o.toElement.className.includes("popper")||this.$refs.timelineMarkersPopper.doClose()},label:{text:this.timelineMarkers[e].length,borderWidth:0,offsetY:23,style:{background:"transparent",color:"#141B38",fontSize:"12px",fontWeight:700}},marker:{size:12,strokeWidth:1,strokeColor:"#D0D1D7",cssClass:"marker-circle"},image:{width:17,height:17}},d=this.timelineMarkers[e].map(t=>t.type);if(d.length===1)switch(s.label={},d[0]){case"aioseoRevision":s.image.path=D(H);break;case"googleUpdate":s.image.path=D(K);break;case"wpRevision":s.image.path=D(q);break}i.push(s)}),i},chartPreset(){return this.preset&&this.presets[this.preset]?this.presets[this.preset]:{}},chartOptions(){let i={...this.chartDefaults,...this.chartPreset,...this.chartOverrides};return this.multiAxis&&(i={...i,...this.multiAxisDefaults}),i},chartClasses(){const i=this.series.length;let e=4;return 4<i&&(e=3),[this.loading?"blurred":"",this.preset?this.preset:"",`legend-${this.legendStyle}`,`legend-columns-${e}`].filter(s=>s).map(s=>"aioseo-graph-"+s)}},methods:{handleTimelineMarkersTooltip(i){var e,s;(e=i.referenceElm)==null||e.classList.remove("active-point"),i.showPopper&&((s=i.referenceElm)==null||s.classList.add("active-point"))},handleTimelineMarkersTooltipUpdate(i){const e=this.$refs.timelineMarkersPopper;e.updatePopper(),i.modal?e.doClose():e.doShow(),this.handleTimelineMarkersTooltip(e)},showTimelineMarkersTooltip(i){var s;const e=this.$refs.timelineMarkersPopper;(s=e.referenceElm)==null||s.classList.remove("active-point"),i==null||i.classList.add("active-point"),e.destroyPopper(),e.doDestroy(),e.referenceElm=i,e.createPopper(),e.doShow()}},mounted(){this.isMounted=!0},beforeUnmount(){this.isMounted=!1}},ht={key:0,class:"aioseo-graph"},pt={class:"popper"};function _t(i,e,s,d,t,o){const r=_("apexchart"),u=_("core-loader"),y=_("graph-timeline-markers"),w=_("core-popper");return t.isMounted?(a(),m("div",ht,[g(r,{width:"100%",height:s.height,ref:"apexchart",options:o.chartOptions,series:o.getSeries,class:j(o.chartClasses)},null,8,["height","options","series","class"]),s.loading?(a(),b(u,{key:0,dark:""})):c("",!0),g(w,{ref:"timelineMarkersPopper",options:{placement:"top"},onShow:o.handleTimelineMarkersTooltip,onHide:o.handleTimelineMarkersTooltip},{default:f(()=>[n("span",pt,[t.timelineMarkersDate?(a(),b(y,{key:0,date:t.timelineMarkersDate,timelineMarkers:s.timelineMarkers,onUpdate:o.handleTimelineMarkersTooltipUpdate},null,8,["date","timelineMarkers","onUpdate"])):c("",!0)])]),_:1},8,["onShow","onHide"])])):c("",!0)}const At=M(ut,[["render",_t]]);export{At as G,ge as S,Be as a};
